[General]

cmdenv-express-mode = true
cmdenv-autoflush = true
cmdenv-status-frequency = 10s
cmdenv-interactive = true


network = NRSeveralBSALC

##########################################################
#            Simulation parameters                       #
##########################################################
debug-on-errors = true
parallel-simulation = false
print-undisposed = false

sim-time-limit = 3600s #it was 600s

#seed-set = ${0,1,2}
seed-set = ${0}

simtime-resolution = ps
#**.scalar-recording = true
#**.vector-recording = true

#**.statistic-recording = false					# si quito este comentario, da error en capa física
**.lteNic.**.statistic-recording = true		# KG
**.lteNic.**.scalar-recording = true
# **.lteNic.**.scalar-recording = false			# KG
**.lteNic.phy.**.vector-recording = true
# **.lteNic.**.vector-recording = false			# KG
# **.udpApp[*].statistic-recording = true
**.udpApp[*].statistic-recording = false		# KG
# **.udpApp[*].scalar-recording = true
**.udpApp[*].scalar-recording = false			# KG
# **.udpApp[*].*.vector-recording = true
**.udpApp[*].*.vector-recording = false			# KG
# *.server*.**.statistic-recording = true
**.udpApp[*].*.statistic-recording =  false		# KG
**.sctp.**.vector-recording = false				# KG
**.udp.**.vector-recording = false				# KG
# **.lteNic.mac.**.statistic-recording = true  		# KG
# **.lteNic.mac.**.scalar-recording = true  			# KG
# **.lteNic.mac.**.vector-recording = true  			# KG

**.lteNic.rlc.um.**.statistic-recording = true  		# KG
**.lteNic.rlc.um.**.scalar-recording = true  			# KG
**.lteNic.rlc.um.**.vector-recording = true  			# KG
**.vector-recording = false 							# KG

**.ppp[*].**.statistic-recording = false
**.sctp.**.statistic-recording = false
**.sctp.statistic-recording = false
**.ppp.**.statistic-recording = false
**.pppIf.**.statistic-recording = false
**.pppInterface.**.statistic-recording = false
**.x2App[*].**.statistic-recording = false
**.x2ppp[*].**.statistic-recording = false
**.networkLayer.**.statistic-recording = false
**.lo0.**.statistic-recording = false
**.am.**.statistic-recording = false
**.am.statistic-recording = false
**.client.**.statistic-recording = false
**.lteNic.sdap.**.statistic-recording = false
**.upf.**.statistic-recording = false
**.ppp*.**.statistic-recording = false
**.router.**.statistic-recording = false

**.coreDebug = false
**.routingRecorder.enabled = false

*.playgroundSizeX = 2121m		#KG: 2000m #it was 3000m
*.playgroundSizeY = 1871m			#KG: 1820m #it was 3000m
*.playgroundSizeZ = 50m

#**.mtu = 5000B

##########################################################
#            VeinsManager parameters                     #
##########################################################
*.veinsManager.moduleType = "nr.corenetwork.nodes.cars.Car"
*.veinsManager.moduleName = "car"
*.veinsManager.moduleDisplayString = "*='i=veins/node/car;is=vs'"
#*.veinsManager.launchConfig = xmldoc("Alicante.launchd.xml")
*.veinsManager.autoShutdown = true
*.veinsManager.updateInterval = 0.01s

*.obstacles.obstacles = xmldoc("config.xml", "//AnalogueModel[@type='SimpleObstacleShadowing']/obstacles")
*.annotations.draw = true

##########################################################
#                      Mobility                          #
##########################################################
*.car[*].mobilityType = "VeinsInetMobility"

**.cellInfo.positionUpdateInterval = 0.01s


##########################################################
#      IP configuration for dynamic-created UEs          #
##########################################################
# enrolled multicast groups must be set in the HostAutoConfigurator (instead of demo.xml), seperated by a single space character
*.car[*].configurator.mcastGroups = "224.0.0.10"

##########################################################
#		     channel parameters                  #
##########################################################
#**.channelControl.pMax = 20W
#**.channelControl.alpha = 2.0
#**.channelControl.sat = -80dBm

**.d2dCapable = false

**.scenarioNR = "DENSE_URBAN_EMBB"
**.channelModelType = "UMi_B" 				# KG originally was "UMa_A"       
**.shadowing = true
**.nodeb_height = 10 # 25 is default		# KG: UMi_B!!!
**.ue_height = 5							# KG: UMi_B!!!
**.carrierfrequency = 4						# KG originally was 2.1     # KG: UMi_B!!	
**.building_height = 20 #20 is default 		# KG originally was 10   
**.street_wide = 20
**.antennaGainUe = 0
**.antennGainEnB = 8
**.antennGainMicro = 5
**.thermalNoise = -104.5
**.ue_noise_figure = 7
**.bs_noise_figure = 5
**.cable_loss = 2
**.fading = true 
**.fading_type = "JAKES"
**.fading_paths = 6							# KG originally was 1
**.extCell_interference = false
**.downlink_interference = false			# KG originally was true
**.uplink_interference = false				# KG originally was true
**.tolerateMaxDistViolation = true			
**.targetBler = 0.1
**.harqReduction = 0.2						# KG originally was 0.1
**.lambdaMinTh = 0.02
**.lambdaMaxTh = 0.2
**.lambdaRatioTh = 20
**.correlation_distance = 1				    # KG originally was 10, set to 1 in channelModels.txt
# we get error: "Error LOS UMiA path loss model --> distance not valid"
**.cqiFlag = false

**.dynamicNlos = true #if true, NLOS evaluation in 2D is conducted, if false, NLOS evaluation is done with probability formulas
**.NlosEvaluationIn3D = true # if dynamicNlos is false, this flag is also false, if both flags are true, the NLOS is evaluated in 3D, only relevant when obstacles (buildings) are included (e.g., urban scenario)

**.mac.schedulingDisciplineUl = "PF"
**.mac.schedulingDisciplineDl = "PF"
#PF
#MAXCI
#DRR

#**.antennaCws = "2;"
#**.txDirection = "ANISOTROPIC"
**.txDirection = "OMNI" #physical layer parameter

##########################################################
#              LTE specific parameters                   #
##########################################################

# Enable dynamic association of UEs (based on best SINR)
**.dynamicCellAssociation = true

**.car[*].macCellId = intuniform(1,9)    # useless if dynamic association is disabled  # KG: changed 8 by 9
**.car[*].masterId = intuniform(1,9)     # useless if dynamic association is disabled  # KG: changed 8 by 9
**.gNodeB1.macCellId = 1
**.gNodeB1.macNodeId = 1
**.gNodeB2.macCellId = 2
**.gNodeB2.macNodeId = 2 
**.gNodeB3.macCellId = 3
**.gNodeB3.macNodeId = 3
**.gNodeB4.macCellId = 4
**.gNodeB4.macNodeId = 4  
**.gNodeB5.macCellId = 5
**.gNodeB5.macNodeId = 5 
**.gNodeB6.macCellId = 6
**.gNodeB6.macNodeId = 6 
**.gNodeB7.macCellId = 7
**.gNodeB7.macNodeId = 7 
**.gNodeB8.macCellId = 8
**.gNodeB8.macNodeId = 8 
**.gNodeB9.macCellId = 9
**.gNodeB9.macNodeId = 9 
**.gNodeBCount = 9 # KG: changed 8 by 9

# AMC
**.binder.numerology = 15
**.cellInfo.numRbDl = 25
**.cellInfo.numRbUl = 25
**.numBands = 1

##
**.nrHarq = true
**.numberHarqProcesses = 8
**.numberHarqProcessesNR = 16
#

**.useSINRThreshold = true #checks if the SINR of a UE is lower than SINRThreshold in UL
#**.thresholdDirection = "DL"
#**.SINRThreshold = 5 # if useSINRThreshold true, the SINR in UL is used to check, whether a UE is in coverage or not (during Handover), if the SINR to all Base stations is lower than this value, the UE is not connected to any base station

#2, 4, 6 or 8 codeblockgroups are allowed
**.useCodeBlockGroups = true
**.numberOfCodeBlockGroups = 8

############### AMC MODULE PARAMETERS ###############
**.rbAllocationType = "localized"
**.mac.amcMode = "AUTO"
**.feedbackType = "ALLBANDS"
**.feedbackGeneratorType = "IDEAL"
**.maxHarqRtx = 2
**.mac.queueSize = 2MiB
**.pfAlpha = 0.95
**.variationFlag = true # in LtePf --> uses QFIs for scheduling priority
**.rtxSignalisedFlagEnabled = true #in UL a RTX is send first before following packets
**.pfTmsAwareDL = false

############### Transmission Power ##################
**.ueTxPower = 26
**.microTxPower = 20   #KG, default is 20
#**.eNodeBTxPower = 46
**.eNodeBTxPower = 46  #KG
**.microCell = true    #KG, added

# X2 and SCTP configuration
*.gNodeB*.numX2Apps = 8    # one x2App per peering eNodeB  // KG: originally it was 7
*.gNodeB*.x2App[*].server*.localPort = 7000 + ancestorIndex(1) # Server ports (x2App[0]=5000, x2App[1]=5001, ...)

*.gNodeB1.x2App[0].client.connectAddress = "gNodeB2%x2ppp0"
*.gNodeB2.x2App[0].client.connectAddress = "gNodeB1%x2ppp0"

*.gNodeB1.x2App[1].client.connectAddress = "gNodeB3%x2ppp0"
*.gNodeB3.x2App[0].client.connectAddress = "gNodeB1%x2ppp1"

*.gNodeB1.x2App[2].client.connectAddress = "gNodeB4%x2ppp0"
*.gNodeB4.x2App[0].client.connectAddress = "gNodeB1%x2ppp2"

*.gNodeB1.x2App[3].client.connectAddress = "gNodeB5%x2ppp0"
*.gNodeB5.x2App[0].client.connectAddress = "gNodeB1%x2ppp3"

*.gNodeB1.x2App[4].client.connectAddress = "gNodeB6%x2ppp0"
*.gNodeB6.x2App[0].client.connectAddress = "gNodeB1%x2ppp4"

*.gNodeB1.x2App[5].client.connectAddress = "gNodeB7%x2ppp0"
*.gNodeB7.x2App[0].client.connectAddress = "gNodeB1%x2ppp5"

*.gNodeB2.x2App[1].client.connectAddress = "gNodeB3%x2ppp1"
*.gNodeB3.x2App[1].client.connectAddress = "gNodeB2%x2ppp1"

*.gNodeB2.x2App[2].client.connectAddress = "gNodeB4%x2ppp1"
*.gNodeB4.x2App[1].client.connectAddress = "gNodeB2%x2ppp2"

*.gNodeB2.x2App[3].client.connectAddress = "gNodeB5%x2ppp1"
*.gNodeB5.x2App[1].client.connectAddress = "gNodeB2%x2ppp3"

*.gNodeB2.x2App[4].client.connectAddress = "gNodeB6%x2ppp1"
*.gNodeB6.x2App[1].client.connectAddress = "gNodeB2%x2ppp4"

*.gNodeB2.x2App[5].client.connectAddress = "gNodeB7%x2ppp1"
*.gNodeB7.x2App[1].client.connectAddress = "gNodeB2%x2ppp5"

*.gNodeB3.x2App[2].client.connectAddress = "gNodeB4%x2ppp2"
*.gNodeB4.x2App[2].client.connectAddress = "gNodeB3%x2ppp2"

*.gNodeB3.x2App[3].client.connectAddress = "gNodeB5%x2ppp2"
*.gNodeB5.x2App[2].client.connectAddress = "gNodeB3%x2ppp3"

*.gNodeB3.x2App[4].client.connectAddress = "gNodeB6%x2ppp2"
*.gNodeB6.x2App[2].client.connectAddress = "gNodeB3%x2ppp4"

*.gNodeB3.x2App[5].client.connectAddress = "gNodeB7%x2ppp2"
*.gNodeB7.x2App[2].client.connectAddress = "gNodeB3%x2ppp5"

*.gNodeB4.x2App[3].client.connectAddress = "gNodeB5%x2ppp3"
*.gNodeB5.x2App[3].client.connectAddress = "gNodeB4%x2ppp3"

*.gNodeB4.x2App[4].client.connectAddress = "gNodeB6%x2ppp3"
*.gNodeB6.x2App[3].client.connectAddress = "gNodeB4%x2ppp4"

*.gNodeB4.x2App[5].client.connectAddress = "gNodeB7%x2ppp3"
*.gNodeB7.x2App[3].client.connectAddress = "gNodeB4%x2ppp5"

*.gNodeB5.x2App[4].client.connectAddress = "gNodeB6%x2ppp4"
*.gNodeB6.x2App[4].client.connectAddress = "gNodeB5%x2ppp4"

*.gNodeB5.x2App[5].client.connectAddress = "gNodeB7%x2ppp4"
*.gNodeB7.x2App[4].client.connectAddress = "gNodeB5%x2ppp5"

*.gNodeB6.x2App[5].client.connectAddress = "gNodeB7%x2ppp5"
*.gNodeB7.x2App[5].client.connectAddress = "gNodeB6%x2ppp5"

*.gNodeB1.x2App[6].client.connectAddress = "gNodeB8%x2ppp0"
*.gNodeB8.x2App[0].client.connectAddress = "gNodeB1%x2ppp6"

*.gNodeB2.x2App[6].client.connectAddress = "gNodeB8%x2ppp1"
*.gNodeB8.x2App[1].client.connectAddress = "gNodeB2%x2ppp6"

*.gNodeB3.x2App[6].client.connectAddress = "gNodeB8%x2ppp2"
*.gNodeB8.x2App[2].client.connectAddress = "gNodeB3%x2ppp6"

*.gNodeB4.x2App[6].client.connectAddress = "gNodeB8%x2ppp3"
*.gNodeB8.x2App[3].client.connectAddress = "gNodeB4%x2ppp6"

*.gNodeB5.x2App[6].client.connectAddress = "gNodeB8%x2ppp4"
*.gNodeB8.x2App[4].client.connectAddress = "gNodeB5%x2ppp6"

*.gNodeB6.x2App[6].client.connectAddress = "gNodeB8%x2ppp5"
*.gNodeB8.x2App[5].client.connectAddress = "gNodeB6%x2ppp6"

*.gNodeB7.x2App[6].client.connectAddress = "gNodeB8%x2ppp6"
*.gNodeB8.x2App[6].client.connectAddress = "gNodeB7%x2ppp6"

*.gNodeB1.x2App[7].client.connectAddress = "gNodeB9%x2ppp0"
*.gNodeB9.x2App[0].client.connectAddress = "gNodeB1%x2ppp7"

*.gNodeB2.x2App[7].client.connectAddress = "gNodeB9%x2ppp1"
*.gNodeB9.x2App[1].client.connectAddress = "gNodeB2%x2ppp7"

*.gNodeB3.x2App[7].client.connectAddress = "gNodeB9%x2ppp2"
*.gNodeB9.x2App[2].client.connectAddress = "gNodeB3%x2ppp7"

*.gNodeB4.x2App[7].client.connectAddress = "gNodeB9%x2ppp3"
*.gNodeB9.x2App[3].client.connectAddress = "gNodeB4%x2ppp7"

*.gNodeB5.x2App[7].client.connectAddress = "gNodeB9%x2ppp4"
*.gNodeB9.x2App[4].client.connectAddress = "gNodeB5%x2ppp7"

*.gNodeB6.x2App[7].client.connectAddress = "gNodeB9%x2ppp5"
*.gNodeB9.x2App[5].client.connectAddress = "gNodeB6%x2ppp7"

*.gNodeB7.x2App[7].client.connectAddress = "gNodeB9%x2ppp6"
*.gNodeB9.x2App[6].client.connectAddress = "gNodeB7%x2ppp7"

*.gNodeB8.x2App[7].client.connectAddress = "gNodeB9%x2ppp7"
*.gNodeB9.x2App[7].client.connectAddress = "gNodeB8%x2ppp7"

**.sctp.nagleEnabled = false         # if true, transmission of small packets will be delayed on the X2
**.sctp.enableHeartbeats = false



##########################################################################################################################


**.partition-id = 
*.car[*].numUdpApps = 1
*.server1.numUdpApps = 1
*.server2.numUdpApps = 0
*.server3.numUdpApps = 0

# DATA
**.car[*].mobility.initFromDisplayString = false
#sim-time-limit = 600s    # default value
#sim-time-limit = 10000s


**.server1.udpApp[0].typename = "nr.apps.TrafficGenerator.TrafficGeneratorServerDL"
**.server1.udpApp[0].packetName = "Video"
**.server1.udpApp[0].localPort = 9999
**.server1.udpApp[0].destPort = 5088 #+ancestorIndex(1)
**.server1.udpApp[0].startTime = 0.1s
**.server1.udpApp[0].startTimeDL = 15s
**.server1.udpApp[0].sendInterval = 30ms
**.server1.udpApp[0].messageLength = 1000B

# Receivers
**.car[*].udpApp[0].typename = "nr.apps.TrafficGenerator.TrafficGeneratorCarDL"
**.car[*].udpApp[0].destAddresses = "server1"
**.car[*].udpApp[0].localPort = 5088 #+ancestorIndex(0) 
**.car[*].udpApp[0].destPort = 9999
**.car[*].udpApp[0].sendInterval = 30ms
**.car[*].udpApp[0].messageLength = 1000B

**.considerDatasizeAndMessages = false

# Enable handover
**.enableHandover = true
**.handoverLatency = 0.001s
**.handoverDelta = 0.0001s
**.broadcastMessageInterval = 1s
**.exchangeBuffersOnHandover = false # exchange all buffers between old and new masterNodeB # KG, changed to TRUE. NO! porque da error la ejecución.


#result-dir = VideoDL-Urban-PF-Var-RTXOn-2RTX-52rb25mHgnb10mHbuilding10mCorrDist-15num-2100MHz-intf-nrHarq-prob
#output-vector-file = ${resultdir}/vector-${seedset}.vec
#output-scalar-file = ${resultdir}/scalar-${seedset}.sca


########################################################################################################################
[Config VideoDL_4928]
*.veinsManager.launchConfig = xmldoc("Alicante_4928.launchd.xml")
result-dir = VideoDL-Urban-4928
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

[Config VideoDL_4951]
#*.veinsManager.launchConfig = xmldoc("4951/Alicante.launchd.xml")
*.veinsManager.launchConfig = xmldoc("Alicante_4951.launchd.xml")
result-dir = VideoDL-Urban-4951
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

[Config VideoDL_4955]
*.veinsManager.launchConfig = xmldoc("Alicante_4955.launchd.xml")
result-dir = VideoDL-Urban-4955
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

[Config VideoDL_5712]
*.veinsManager.launchConfig = xmldoc("Alicante_5712.launchd.xml")
result-dir = VideoDL-Urban-5712
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

[Config VideoDL_5734]
*.veinsManager.launchConfig = xmldoc("Alicante_5734.launchd.xml")
result-dir = VideoDL-Urban-5734
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

[Config VideoDL_5749]
*.veinsManager.launchConfig = xmldoc("Alicante_5749.launchd.xml")
result-dir = VideoDL-Urban-5749
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

[Config VideoDL_6900]
*.veinsManager.launchConfig = xmldoc("Alicante_6900.launchd.xml")
result-dir = VideoDL-Urban-6900
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

[Config VideoDL_6908]
*.veinsManager.launchConfig = xmldoc("Alicante_6908.launchd.xml")
result-dir = VideoDL-Urban-6908
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

[Config VideoDL_6923]
*.veinsManager.launchConfig = xmldoc("Alicante_6923.launchd.xml")
result-dir = VideoDL-Urban-6923
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

[Config VideoDL_8589]
*.veinsManager.launchConfig = xmldoc("Alicante_8589.launchd.xml")
result-dir = VideoDL-Urban-8589
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

[Config VideoDL_8595]
*.veinsManager.launchConfig = xmldoc("Alicante_8595.launchd.xml")
result-dir = VideoDL-Urban-8595
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

[Config VideoDL_8630]
*.veinsManager.launchConfig = xmldoc("Alicante_8630.launchd.xml")
result-dir = VideoDL-Urban-8630
output-vector-file = ${resultdir}/vector-${seedset}.vec
output-scalar-file = ${resultdir}/scalar-${seedset}.sca

